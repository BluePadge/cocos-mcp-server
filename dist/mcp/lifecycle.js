"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.MCP_METHODS = void 0;
exports.isInitializeMethod = isInitializeMethod;
exports.isInitializedNotification = isInitializedNotification;
exports.isNotificationMethod = isNotificationMethod;
exports.requiresSessionHeader = requiresSessionHeader;
exports.canHandleBeforeReady = canHandleBeforeReady;
exports.ensureInitializeIsRequest = ensureInitializeIsRequest;
exports.isSessionReady = isSessionReady;
exports.MCP_METHODS = {
    Initialize: 'initialize',
    InitializedNotification: 'notifications/initialized',
    ToolsList: 'tools/list',
    ToolsCall: 'tools/call',
    Ping: 'ping'
};
function isInitializeMethod(method) {
    return method === exports.MCP_METHODS.Initialize;
}
function isInitializedNotification(method) {
    return method === exports.MCP_METHODS.InitializedNotification;
}
function isNotificationMethod(method) {
    return method.startsWith('notifications/');
}
function requiresSessionHeader(method) {
    return !isInitializeMethod(method);
}
function canHandleBeforeReady(method, isNotification) {
    if (isInitializeMethod(method)) {
        return true;
    }
    if (isNotification && isInitializedNotification(method)) {
        return true;
    }
    return false;
}
function ensureInitializeIsRequest(message) {
    return Object.prototype.hasOwnProperty.call(message, 'id');
}
function isSessionReady(session) {
    return session.phase === 'ready';
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGlmZWN5Y2xlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc291cmNlL21jcC9saWZlY3ljbGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBV0EsZ0RBRUM7QUFFRCw4REFFQztBQUVELG9EQUVDO0FBRUQsc0RBRUM7QUFFRCxvREFVQztBQUVELDhEQUVDO0FBRUQsd0NBRUM7QUExQ1ksUUFBQSxXQUFXLEdBQUc7SUFDdkIsVUFBVSxFQUFFLFlBQVk7SUFDeEIsdUJBQXVCLEVBQUUsMkJBQTJCO0lBQ3BELFNBQVMsRUFBRSxZQUFZO0lBQ3ZCLFNBQVMsRUFBRSxZQUFZO0lBQ3ZCLElBQUksRUFBRSxNQUFNO0NBQ04sQ0FBQztBQUVYLFNBQWdCLGtCQUFrQixDQUFDLE1BQWM7SUFDN0MsT0FBTyxNQUFNLEtBQUssbUJBQVcsQ0FBQyxVQUFVLENBQUM7QUFDN0MsQ0FBQztBQUVELFNBQWdCLHlCQUF5QixDQUFDLE1BQWM7SUFDcEQsT0FBTyxNQUFNLEtBQUssbUJBQVcsQ0FBQyx1QkFBdUIsQ0FBQztBQUMxRCxDQUFDO0FBRUQsU0FBZ0Isb0JBQW9CLENBQUMsTUFBYztJQUMvQyxPQUFPLE1BQU0sQ0FBQyxVQUFVLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztBQUMvQyxDQUFDO0FBRUQsU0FBZ0IscUJBQXFCLENBQUMsTUFBYztJQUNoRCxPQUFPLENBQUMsa0JBQWtCLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDdkMsQ0FBQztBQUVELFNBQWdCLG9CQUFvQixDQUFDLE1BQWMsRUFBRSxjQUF1QjtJQUN4RSxJQUFJLGtCQUFrQixDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUM7UUFDN0IsT0FBTyxJQUFJLENBQUM7SUFDaEIsQ0FBQztJQUVELElBQUksY0FBYyxJQUFJLHlCQUF5QixDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUM7UUFDdEQsT0FBTyxJQUFJLENBQUM7SUFDaEIsQ0FBQztJQUVELE9BQU8sS0FBSyxDQUFDO0FBQ2pCLENBQUM7QUFFRCxTQUFnQix5QkFBeUIsQ0FBQyxPQUE2QztJQUNuRixPQUFPLE1BQU0sQ0FBQyxTQUFTLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFDL0QsQ0FBQztBQUVELFNBQWdCLGNBQWMsQ0FBQyxPQUFtQjtJQUM5QyxPQUFPLE9BQU8sQ0FBQyxLQUFLLEtBQUssT0FBTyxDQUFDO0FBQ3JDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBKc29uUnBjTm90aWZpY2F0aW9uLCBKc29uUnBjUmVxdWVzdCB9IGZyb20gJy4vbWVzc2FnZXMnO1xuaW1wb3J0IHsgTWNwU2Vzc2lvbiB9IGZyb20gJy4vc2Vzc2lvbi1zdG9yZSc7XG5cbmV4cG9ydCBjb25zdCBNQ1BfTUVUSE9EUyA9IHtcbiAgICBJbml0aWFsaXplOiAnaW5pdGlhbGl6ZScsXG4gICAgSW5pdGlhbGl6ZWROb3RpZmljYXRpb246ICdub3RpZmljYXRpb25zL2luaXRpYWxpemVkJyxcbiAgICBUb29sc0xpc3Q6ICd0b29scy9saXN0JyxcbiAgICBUb29sc0NhbGw6ICd0b29scy9jYWxsJyxcbiAgICBQaW5nOiAncGluZydcbn0gYXMgY29uc3Q7XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0luaXRpYWxpemVNZXRob2QobWV0aG9kOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gbWV0aG9kID09PSBNQ1BfTUVUSE9EUy5Jbml0aWFsaXplO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNJbml0aWFsaXplZE5vdGlmaWNhdGlvbihtZXRob2Q6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBtZXRob2QgPT09IE1DUF9NRVRIT0RTLkluaXRpYWxpemVkTm90aWZpY2F0aW9uO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNOb3RpZmljYXRpb25NZXRob2QobWV0aG9kOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gbWV0aG9kLnN0YXJ0c1dpdGgoJ25vdGlmaWNhdGlvbnMvJyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZXF1aXJlc1Nlc3Npb25IZWFkZXIobWV0aG9kOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gIWlzSW5pdGlhbGl6ZU1ldGhvZChtZXRob2QpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2FuSGFuZGxlQmVmb3JlUmVhZHkobWV0aG9kOiBzdHJpbmcsIGlzTm90aWZpY2F0aW9uOiBib29sZWFuKTogYm9vbGVhbiB7XG4gICAgaWYgKGlzSW5pdGlhbGl6ZU1ldGhvZChtZXRob2QpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGlmIChpc05vdGlmaWNhdGlvbiAmJiBpc0luaXRpYWxpemVkTm90aWZpY2F0aW9uKG1ldGhvZCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZW5zdXJlSW5pdGlhbGl6ZUlzUmVxdWVzdChtZXNzYWdlOiBKc29uUnBjUmVxdWVzdCB8IEpzb25ScGNOb3RpZmljYXRpb24pOiBib29sZWFuIHtcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsICdpZCcpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNTZXNzaW9uUmVhZHkoc2Vzc2lvbjogTWNwU2Vzc2lvbik6IGJvb2xlYW4ge1xuICAgIHJldHVybiBzZXNzaW9uLnBoYXNlID09PSAncmVhZHknO1xufVxuIl19