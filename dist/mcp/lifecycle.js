"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.MCP_METHODS = void 0;
exports.isInitializeMethod = isInitializeMethod;
exports.isInitializedNotification = isInitializedNotification;
exports.isNotificationMethod = isNotificationMethod;
exports.requiresSessionHeader = requiresSessionHeader;
exports.canHandleBeforeReady = canHandleBeforeReady;
exports.ensureInitializeIsRequest = ensureInitializeIsRequest;
exports.isSessionReady = isSessionReady;
exports.MCP_METHODS = {
    Initialize: 'initialize',
    InitializedNotification: 'notifications/initialized',
    ToolsList: 'tools/list',
    ToolsCall: 'tools/call',
    GetToolManifest: 'get_tool_manifest',
    GetTraceById: 'get_trace_by_id',
    Ping: 'ping'
};
function isInitializeMethod(method) {
    return method === exports.MCP_METHODS.Initialize;
}
function isInitializedNotification(method) {
    return method === exports.MCP_METHODS.InitializedNotification;
}
function isNotificationMethod(method) {
    return method.startsWith('notifications/');
}
function requiresSessionHeader(method) {
    return !isInitializeMethod(method);
}
function canHandleBeforeReady(method, isNotification) {
    if (isInitializeMethod(method)) {
        return true;
    }
    if (isNotification && isInitializedNotification(method)) {
        return true;
    }
    return false;
}
function ensureInitializeIsRequest(message) {
    return Object.prototype.hasOwnProperty.call(message, 'id');
}
function isSessionReady(session) {
    return session.phase === 'ready';
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGlmZWN5Y2xlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc291cmNlL21jcC9saWZlY3ljbGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBYUEsZ0RBRUM7QUFFRCw4REFFQztBQUVELG9EQUVDO0FBRUQsc0RBRUM7QUFFRCxvREFVQztBQUVELDhEQUVDO0FBRUQsd0NBRUM7QUE1Q1ksUUFBQSxXQUFXLEdBQUc7SUFDdkIsVUFBVSxFQUFFLFlBQVk7SUFDeEIsdUJBQXVCLEVBQUUsMkJBQTJCO0lBQ3BELFNBQVMsRUFBRSxZQUFZO0lBQ3ZCLFNBQVMsRUFBRSxZQUFZO0lBQ3ZCLGVBQWUsRUFBRSxtQkFBbUI7SUFDcEMsWUFBWSxFQUFFLGlCQUFpQjtJQUMvQixJQUFJLEVBQUUsTUFBTTtDQUNOLENBQUM7QUFFWCxTQUFnQixrQkFBa0IsQ0FBQyxNQUFjO0lBQzdDLE9BQU8sTUFBTSxLQUFLLG1CQUFXLENBQUMsVUFBVSxDQUFDO0FBQzdDLENBQUM7QUFFRCxTQUFnQix5QkFBeUIsQ0FBQyxNQUFjO0lBQ3BELE9BQU8sTUFBTSxLQUFLLG1CQUFXLENBQUMsdUJBQXVCLENBQUM7QUFDMUQsQ0FBQztBQUVELFNBQWdCLG9CQUFvQixDQUFDLE1BQWM7SUFDL0MsT0FBTyxNQUFNLENBQUMsVUFBVSxDQUFDLGdCQUFnQixDQUFDLENBQUM7QUFDL0MsQ0FBQztBQUVELFNBQWdCLHFCQUFxQixDQUFDLE1BQWM7SUFDaEQsT0FBTyxDQUFDLGtCQUFrQixDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQ3ZDLENBQUM7QUFFRCxTQUFnQixvQkFBb0IsQ0FBQyxNQUFjLEVBQUUsY0FBdUI7SUFDeEUsSUFBSSxrQkFBa0IsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDO1FBQzdCLE9BQU8sSUFBSSxDQUFDO0lBQ2hCLENBQUM7SUFFRCxJQUFJLGNBQWMsSUFBSSx5QkFBeUIsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDO1FBQ3RELE9BQU8sSUFBSSxDQUFDO0lBQ2hCLENBQUM7SUFFRCxPQUFPLEtBQUssQ0FBQztBQUNqQixDQUFDO0FBRUQsU0FBZ0IseUJBQXlCLENBQUMsT0FBNkM7SUFDbkYsT0FBTyxNQUFNLENBQUMsU0FBUyxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxDQUFDO0FBQy9ELENBQUM7QUFFRCxTQUFnQixjQUFjLENBQUMsT0FBbUI7SUFDOUMsT0FBTyxPQUFPLENBQUMsS0FBSyxLQUFLLE9BQU8sQ0FBQztBQUNyQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSnNvblJwY05vdGlmaWNhdGlvbiwgSnNvblJwY1JlcXVlc3QgfSBmcm9tICcuL21lc3NhZ2VzJztcbmltcG9ydCB7IE1jcFNlc3Npb24gfSBmcm9tICcuL3Nlc3Npb24tc3RvcmUnO1xuXG5leHBvcnQgY29uc3QgTUNQX01FVEhPRFMgPSB7XG4gICAgSW5pdGlhbGl6ZTogJ2luaXRpYWxpemUnLFxuICAgIEluaXRpYWxpemVkTm90aWZpY2F0aW9uOiAnbm90aWZpY2F0aW9ucy9pbml0aWFsaXplZCcsXG4gICAgVG9vbHNMaXN0OiAndG9vbHMvbGlzdCcsXG4gICAgVG9vbHNDYWxsOiAndG9vbHMvY2FsbCcsXG4gICAgR2V0VG9vbE1hbmlmZXN0OiAnZ2V0X3Rvb2xfbWFuaWZlc3QnLFxuICAgIEdldFRyYWNlQnlJZDogJ2dldF90cmFjZV9ieV9pZCcsXG4gICAgUGluZzogJ3BpbmcnXG59IGFzIGNvbnN0O1xuXG5leHBvcnQgZnVuY3Rpb24gaXNJbml0aWFsaXplTWV0aG9kKG1ldGhvZDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIG1ldGhvZCA9PT0gTUNQX01FVEhPRFMuSW5pdGlhbGl6ZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzSW5pdGlhbGl6ZWROb3RpZmljYXRpb24obWV0aG9kOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gbWV0aG9kID09PSBNQ1BfTUVUSE9EUy5Jbml0aWFsaXplZE5vdGlmaWNhdGlvbjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzTm90aWZpY2F0aW9uTWV0aG9kKG1ldGhvZDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIG1ldGhvZC5zdGFydHNXaXRoKCdub3RpZmljYXRpb25zLycpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVxdWlyZXNTZXNzaW9uSGVhZGVyKG1ldGhvZDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICFpc0luaXRpYWxpemVNZXRob2QobWV0aG9kKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNhbkhhbmRsZUJlZm9yZVJlYWR5KG1ldGhvZDogc3RyaW5nLCBpc05vdGlmaWNhdGlvbjogYm9vbGVhbik6IGJvb2xlYW4ge1xuICAgIGlmIChpc0luaXRpYWxpemVNZXRob2QobWV0aG9kKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAoaXNOb3RpZmljYXRpb24gJiYgaXNJbml0aWFsaXplZE5vdGlmaWNhdGlvbihtZXRob2QpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGVuc3VyZUluaXRpYWxpemVJc1JlcXVlc3QobWVzc2FnZTogSnNvblJwY1JlcXVlc3QgfCBKc29uUnBjTm90aWZpY2F0aW9uKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCAnaWQnKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzU2Vzc2lvblJlYWR5KHNlc3Npb246IE1jcFNlc3Npb24pOiBib29sZWFuIHtcbiAgICByZXR1cm4gc2Vzc2lvbi5waGFzZSA9PT0gJ3JlYWR5Jztcbn1cbiJdfQ==