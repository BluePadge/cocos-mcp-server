<div class="mcp-app">
    <section class="server-status">
        <h3>服务器状态</h3>
        <div class="status-info">
            <ui-prop>
                <ui-label slot="label">状态</ui-label>
                <ui-label slot="content" class="status-value" :class="statusClass">{{ serverStatus }}</ui-label>
            </ui-prop>
            <ui-prop v-if="serverRunning">
                <ui-label slot="label">连接数</ui-label>
                <ui-label slot="content">{{ connectedClients }}</ui-label>
            </ui-prop>
        </div>
    </section>

    <section class="server-controls">
        <ui-button @click="toggleServer" :disabled="isProcessing" class="primary">
            {{ serverRunning ? '停止服务器' : '启动服务器' }}
        </ui-button>
    </section>

    <section class="server-settings">
        <h3>服务器设置</h3>
        <ui-prop>
            <ui-label slot="label">端口</ui-label>
            <ui-num-input slot="content" v-model="settings.port" :min="1024" :max="65535" :step="1" :disabled="serverRunning"></ui-num-input>
        </ui-prop>
        <ui-prop>
            <ui-label slot="label">自动启动</ui-label>
            <ui-checkbox slot="content" v-model="settings.autoStart"></ui-checkbox>
        </ui-prop>
        <ui-prop>
            <ui-label slot="label">调试日志</ui-label>
            <ui-checkbox slot="content" v-model="settings.debugLog"></ui-checkbox>
        </ui-prop>
        <ui-prop>
            <ui-label slot="label">最大连接数</ui-label>
            <ui-num-input slot="content" v-model="settings.maxConnections" :min="1" :max="100" :step="1"></ui-num-input>
        </ui-prop>
    </section>

    <section class="server-info" v-if="serverRunning">
        <h3>连接信息</h3>
        <div class="connection-details">
            <ui-prop>
                <ui-label slot="label">HTTP URL</ui-label>
                <ui-input slot="content" :value="httpUrl" readonly>
                    <ui-button slot="suffix" @click="copyUrl">复制</ui-button>
                </ui-input>
            </ui-prop>
        </div>
    </section>

    <footer>
        <ui-button @click="saveSettings" :disabled="!settingsChanged">保存设置</ui-button>
    </footer>
</div>
